
# ğŸ¨ Azure DevOps CI Pipeline Notes (With Emojis â€“ Canva-Ready)

---

## ğŸš€ 1. Pipeline Overview
This CI pipeline prepares a Node.js application for deployment by performing:

1ï¸âƒ£ Getting the source code  
2ï¸âƒ£ Using **Node 24**  
3ï¸âƒ£ Running **npm install**  
4ï¸âƒ£ Copying files to a staging directory  
5ï¸âƒ£ Creating a ZIP file with a **build number**  
6ï¸âƒ£ Publishing the ZIP as an artifact  

---

## ğŸ§° 2. Use Node 24
### âœ” Task: Node.js tool installer
- **Version Spec:** `24`

This sets the agent to use **Node.js version 24**.

ğŸ“Œ Type exactly: **24**

---

## ğŸ“¦ 3. npm install
### âœ” Task: npm
- **Command:** `install`
- **Working folder:** `.`

ğŸ“Œ The dot (`.`) means **current folder**.  
This is where your package.json is located.

---

## ğŸ“‚ 4. Copy Files
### âœ” Task: Copy files
- **Source Folder:** `$(Build.SourcesDirectory)`
- **Contents:** `**`
- **Target Folder:** `$(Build.ArtifactStagingDirectory)`

---

## ğŸ” Variable Explanations (Simple)
### ğŸ”¹ `$(Build.SourcesDirectory)`
Builtâ€‘in Azure DevOps variable pointing to the folder where your code is downloaded.  
â¡ï¸ **Copy it exactly**.

### ğŸ”¹ `$(Build.ArtifactStagingDirectory)`
Builtâ€‘in variable where files are placed before packaging.  
â¡ï¸ **Do not modify it**.

### ğŸ”¹ `**`
Wildcard pattern meaning:  
ğŸ‘‰ â€œCopy **everything** in all subfolders.â€  
â¡ï¸ Must be exactly **two stars**.

---

## ğŸ—œï¸ 5. Archive Files (ZIP)
### âœ” Task: Archive files
- **Root folder:** `$(Build.ArtifactStagingDirectory)`
- **Archive type:** `zip`
- **Archive file to create:**  
  `$(Build.ArtifactStagingDirectory)/output-$(Build.BuildId).zip`

### â­ Build Number Usage
`$(Build.BuildId)`  
- Azure DevOps **inbuilt build number**  
- Changes with every pipeline run  
- Creates names like:  
  `output-101.zip`  
  `output-202.zip`

---

## âš ï¸ Important ZIP Warning
The archive step **will fail** if the agent does not have the `zip` tool installed.

- Microsoft-hosted agents â†’ âœ… zip already installed  
- Self-hosted agents â†’ âŒ zip missing â†’ pipeline fails

### Install ZIP manually:

**Ubuntu**
```bash
sudo apt update
sudo apt install zip -y
```

**Windows**
- Install **7zip** or enable compression tools

---

## ğŸ“¤ 6. Publish Artifact
### âœ” Task: Publish build artifacts
- **Path to publish:**  
  `$(Build.ArtifactStagingDirectory)/output-$(Build.BuildId).zip`
- **Artifact name:** `drop`
- **Publish location:** Azure Pipelines

This ZIP file becomes your deployable build artifact.

---

## ğŸ‰ Final Notes
- Variables like `$(Build.BuildId)` are **inbuilt DevOps variables**  
- Always **copy them exactly**  
- `**` must be exactly two stars (not one, not three)

---

